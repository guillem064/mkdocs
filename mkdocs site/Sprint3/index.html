<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Sprint_3 - S.I. Guillem</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Sprint_3";
        var mkdocs_page_input_path = "Sprint3.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> S.I. Guillem
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Inici/">Inici</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Sprint_1</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index2/">Sprint_2</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Sprint_3</a>
    <ul class="current">
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">S.I. Guillem</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Sprint_3</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="sprint-3">Sprint 3</h1>
<p>instalacio LDAP</p>
<p>Al entrar en la maquina li posem una IP al servidor manualment</p>
<p><img alt="captura de pantalla1" src="../img/image.png" /></p>
<p>Canviem el hostname</p>
<p><img alt="captura de pantalla1" src="../img/image%282%29.png" /></p>
<p>I afegim el domini que utilitzarem seguit del hostname</p>
<p><img alt="captura de pantalla1" src="../img/image%283%29.png" /></p>
<p>Fem un update per a guardar tot</p>
<p><img alt="captura de pantalla1" src="../img/image%284%29.png" /></p>
<p>Començarem instal·lant els requisits per tindre el ldap</p>
<p><img alt="captura de pantalla1" src="../img/image%285%29.png" /></p>
<p>posem un contrasenya i seguidament la confirmem</p>
<p><img alt="captura de pantalla1" src="../img/image%286%29.png" /></p>
<p><img alt="captura de pantalla1" src="../img/image%287%29.png" /></p>
<p>per a crear lo que es la base del domini es pot fer a traves dels arxius base o a traves d’una comanda, nosaltres ho farem per comanda.</p>
<p><img alt="captura de pantalla1" src="../img/image%288%29.png" /></p>
<p>Ho farem tot manualment ja que volem configurar-ho al nostre gust.</p>
<p><img alt="captura de pantalla1" src="../img/image%289%29.png" /></p>
<p>Posarem el nom del nostre domini</p>
<p><img alt="captura de pantalla1" src="../img/image%2810%29.png" /></p>
<p>El nom de l’organització</p>
<p><img alt="captura de pantalla1" src="../img/image%2811%29.png" /></p>
<p>Confirmem amb la contrasenya que hem posat anteriorment</p>
<p><img alt="captura de pantalla1" src="../img/image%2812%29.png" /></p>
<p><img alt="captura de pantalla1" src="../img/image%2813%29.png" /></p>
<p>Assegurem que no tinguéssim res ja fet i així tindre totes les característiques noves</p>
<p><img alt="captura de pantalla1" src="../img/image%2814%29.png" /></p>
<p><img alt="captura de pantalla1" src="../img/image%2815%29.png" /></p>
<p>Fem un slapcat per confirmar tots els canvis,</p>
<p>com podem veure tenim canviat el nom del domini i l'organització.</p>
<p><img alt="captura de pantalla1" src="../img/image%2816%29.png" /></p>
<p>2.gestio d’usuaris i grups i comandes</p>
<p>Creem una unitat organitzativa que es un contenidor dins del directori per guardar objectes com usuaris, grups etc…</p>
<p>la utilitzarem per poder guardar tots els usuaris que volem.</p>
<p><img alt="captura de pantalla1" src="../img/image%2817%29.png" /></p>
<p>Creem un grup anomenat alumnes per a poder posar els usuaris creats dins del grup i posarem els usuaris que volem afegir a baix de tot.</p>
<p><img alt="captura de pantalla1" src="../img/image%2818%29.png" /></p>
<p>Ara configurarem el fitxer de  l’usuari per a poder utilitzar-lo en la maquina client definint els tipus d'objectes que es.</p>
<p><img alt="captura de pantalla1" src="../img/image%2819%29.png" /></p>
<p>Aqui afegim els usuaris, grups, unitats organitzatives, etc…</p>
<p><img alt="captura de pantalla1" src="../img/image%2820%29.png" /></p>
<p><img alt="captura de pantalla1" src="../img/image%2821%29.png" /></p>
<p><img alt="captura de pantalla1" src="../img/image%2822%29.png" /></p>
<p>Que volen dir aquest parametres?(-c -x -D -W -f)</p>
<p>la -c fa que el ldapadd continuï executant-se encara que es produeixin errors.</p>
<p>la -x utilitza autenticació simple en lloc de SASL (Simple Authentication and Security Layer).</p>
<p>la -D indica el Distinguished Name (DN) de l'usuari que realitza l'operació, en aquest cas, l'usuari administrador.</p>
<p>La -W demana la contrasenya de l'usuari especificat amb -D. Això és més segur que incloure la contrasenya directament a la comanda com passaria amb la -w.</p>
<p>Maquina client</p>
<p>fem un apt Update per començar a configurar la màquina client i tindre-ho tot al dia</p>
<p><img alt="captura de pantalla1" src="../img/image%2823%29.png" /></p>
<p>fem un ping al servidor per veure si tenim conexió.</p>
<p><img alt="captura de pantalla1" src="../img/image%2824%29.png" /></p>
<p>Aqui instal·larem el nscd que es un dimoni (programa en segon pla) que s’encarrega d’emmagatzemar el cache.</p>
<p><img alt="captura de pantalla1" src="../img/image%2825%29.png" /></p>
<p>Seguidament instal·larem una llibreria per a poder fer la conexio al domini ldap des del client.</p>
<p><img alt="captura de pantalla1" src="../img/image%2826%29.png" /></p>
<p>posem la IP del server per tindre conexio en ell</p>
<p><img alt="captura de pantalla1" src="../img/image%2827%29.png" /></p>
<p>Ara posarem el nom del domini per a que es connecti</p>
<p><img alt="captura de pantalla1" src="../img/image%2828%29.png" /></p>
<p>Utilitzarem la versió 3 del LDAP</p>
<p><img alt="captura de pantalla1" src="../img/image%2829%29.png" /></p>
<p>Li donarem permisos al usuari root per a poder configurar el ldap</p>
<p><img alt="captura de pantalla1" src="../img/image%2830%29.png" /></p>
<p>Marcarem que no fa falta fer login per a entrar a la base de dades del nostre ldap</p>
<p><img alt="captura de pantalla1" src="../img/image%2831%29.png" /></p>
<p>posem la conta admin per al nostre root.</p>
<p><img alt="captura de pantalla1" src="../img/image%2832%29.png" /></p>
<p>Posem la contrasenya</p>
<p><img alt="captura de pantalla1" src="../img/image%2833%29.png" /></p>
<p>Instal·larem el libpam-ldap per poder iniciar en usuaris</p>
<p><img alt="captura de pantalla1" src="../img/image%2834%29.png" /></p>
<p>Quan el client no es pugui validar al domini apart de comprovar els arxius de configuracio que veurem a continuacio tambe farem sempre un reconfigure:</p>
<p>dpkg-reconfigure ldap-auth-config</p>
<p><img alt="captura de pantalla1" src="../img/image%2835%29.png" /></p>
<p><img alt="captura de pantalla1" src="../img/image%2836%29.png" /></p>
<p><img alt="captura de pantalla1" src="../img/image%2837%29.png" /></p>
<p>triem la forma de encriptar la contrasenya</p>
<p><img alt="captura de pantalla1" src="../img/image%2838%29.png" /></p>
<p><img alt="captura de pantalla1" src="../img/image%2839%29.png" /></p>
<p>entrarem al fitxer /etc/nsswitch.conf canviar-ho i deixar-ho igual que a la imatge següent.</p>
<p><strong>Fitxer <code>/etc/nsswitch.conf</code></strong></p>
<p>Modifiquem la configuració de Name Service Switch (NSS) per incloure <code>ldap</code> abans d'altres mètodes de resolució (<code>compat</code>, <code>files</code>, <code>systemd</code>, <code>sss</code>).</p>
<p>Ara l'autenticació i la gestió d'usuaris es basarà primer en LDAP abans de consultar altres mecanismes locals.</p>
<p>Això permet que usuaris gestionats per LDAP puguin autenticar-se sense necessitat d'estar registrats localment a la màquina.</p>
<p><img alt="captura de pantalla1" src="../img/image%2840%29.png" /></p>
<p>Entrem al fitxer /etc/pam.d/common-password i canviem el use_authtok</p>
<p>S'han afegit mòduls PAM per a <code>pam_ldap.so</code> i <code>pam_unix.so</code>, prioritzant l'autenticació mitjançant LDAP però mantenint altres mecanismes com a fallback.</p>
<p>L'autenticació de contrasenyes pot utilitzar LDAP.</p>
<p>Es poden establir regles específiques com <code>use_authtok</code> i <code>try_first_pass</code>, que permeten reutilitzar credencials introduïdes prèviament per a evitar haver d'introduir-les diverses vegades.</p>
<p><img alt="captura de pantalla1" src="../img/image%2841%29.png" /></p>
<p><img alt="captura de pantalla1" src="../img/image%2842%29.png" /></p>
<p>S'ha afegit <code>pam_mkhomedir.so skel=/etc/skel umask=077</code>, que assegura que es creï un directori d'inici (<code>home</code>) per als usuaris que s'autentiquen mitjançant LDAP.</p>
<p>Si un usuari LDAP inicia sessió per primer cop, el sistema crearà automàticament el seu directori <code>/home/usuari</code> amb permisos restringits (<code>umask=077</code>), evitant que altres usuaris puguin accedir als seus fitxers.</p>
<p>mirem la conexio que estigui correcta</p>
<p>Permet que es mostri l'opció d'inici de sessió manual a LightDM.</p>
<p>Facilita que usuaris LDAP (o altres comptes no definits localment) puguin iniciar sessió introduint el seu nom d'usuari i contrasenya.</p>
<p><img alt="captura de pantalla1" src="../img/image%2843%29.png" /></p>
<p>comprovem que el usuari estigui be</p>
<p><img alt="captura de pantalla1" src="../img/image%2844%29.png" /></p>
<p>Ens conectem i veiem que funciona.</p>
<p><img alt="captura de pantalla1" src="../img/image%2845%29.png" /></p>
<p>I ja estariem dins del usuari</p>
<p><img alt="captura de pantalla1" src="../img/image%2846%29.png" /></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../index2/" class="btn btn-neutral float-left" title="Sprint_2"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../index2/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
